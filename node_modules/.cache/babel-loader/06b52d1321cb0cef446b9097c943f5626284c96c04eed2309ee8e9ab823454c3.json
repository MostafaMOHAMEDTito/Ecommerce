{"ast":null,"code":"import axios from\"axios\";import React,{useContext,useEffect}from\"react\";import{useQuery}from\"react-query\";import{addCart}from\"../../Context/AddProductToCart\";import{RotatingLines,Watch}from\"react-loader-spinner\";import{Navigate}from\"react-router-dom\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AllOrders(){const{userId,getProductFromCart}=useContext(addCart);useEffect(()=>{getProductFromCart();},[]);async function fetchAllOrders(){try{const response=await axios.get(\"https://ecommerce.routemisr.com/api/v1/orders/user/\".concat(localStorage.getItem(\"userId\")));return response.data;}catch(error){console.error(\"Error fetching orders:\",error);throw new Error(\"Failed to fetch orders\");}}const{data:orders,isLoading,isError}=useQuery(\"allOrders\",fetchAllOrders);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\",children:/*#__PURE__*/_jsx(RotatingLines,{visible:true,height:96,width:96,color:\"var(--main-color)\",strokeWidth:5,animationDuration:0.75,ariaLabel:\"rotating-lines-loading\"})});}if(isError){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Orders\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-main my-md-5\",children:\"All Orders\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders to display\"}):orders.map((order,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"row border-bottom border-light mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Watch,{visible:true,height:80,width:80,radius:48,color:\"#4fa94d\",ariaLabel:\"watch-loading\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:\"Total Order Price:\"}),\" \",order.totalOrderPrice,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:\"Details:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:\"Order to:\"}),\" \",order.user.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:\"Phone:\"}),\" \",order.user.phone,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:\"Email:\"}),\" \",order.user.email,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:order.paymentMethodType})]},index))]})]});}","map":{"version":3,"names":["axios","React","useContext","useEffect","useQuery","addCart","RotatingLines","Watch","Navigate","Helmet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AllOrders","userId","getProductFromCart","fetchAllOrders","response","get","concat","localStorage","getItem","data","error","console","Error","orders","isLoading","isError","className","children","visible","height","width","color","strokeWidth","animationDuration","ariaLabel","to","length","map","order","index","radius","totalOrderPrice","user","name","phone","email","paymentMethodType"],"sources":["C:/Users/Mostafa/OneDrive/Desktop/Route/final-pro/src/component/AllOrders/AllOrders.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { addCart } from \"../../Context/AddProductToCart\";\r\nimport { RotatingLines, Watch } from \"react-loader-spinner\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport default function AllOrders() {\r\n  const { userId, getProductFromCart } = useContext(addCart);\r\n\r\n  useEffect(() => {\r\n    getProductFromCart();\r\n  }, []);\r\n\r\n  async function fetchAllOrders() {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://ecommerce.routemisr.com/api/v1/orders/user/${localStorage.getItem(\r\n          \"userId\"\r\n        )}`\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error fetching orders:\", error);\r\n      throw new Error(\"Failed to fetch orders\");\r\n    }\r\n  }\r\n\r\n  const {\r\n    data: orders,\r\n    isLoading,\r\n    isError,\r\n  } = useQuery(\"allOrders\", fetchAllOrders);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\">\r\n        <RotatingLines\r\n          visible={true}\r\n          height={96}\r\n          width={96}\r\n          color=\"var(--main-color)\"\r\n          strokeWidth={5}\r\n          animationDuration={0.75}\r\n          ariaLabel=\"rotating-lines-loading\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isError) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Orders</title>\r\n      </Helmet>\r\n      <div className=\"container\">\r\n        <h2 className=\"text-main my-md-5\">All Orders</h2>\r\n        {orders.length === 0 ? (\r\n          <p>No orders to display</p>\r\n        ) : (\r\n          orders.map((order, index) => (\r\n            <div key={index} className=\"row border-bottom border-light mb-3\">\r\n              <div className=\"col-md-2\">\r\n                <Watch\r\n                  visible={true}\r\n                  height={80}\r\n                  width={80}\r\n                  radius={48}\r\n                  color=\"#4fa94d\"\r\n                  ariaLabel=\"watch-loading\"\r\n                />\r\n              </div>\r\n              <div className=\"col-6\">\r\n                <h5>\r\n                  <span className=\"text-main\">Total Order Price:</span>{\" \"}\r\n                  {order.totalOrderPrice}{\" \"}\r\n                </h5>\r\n                <p>\r\n                  <span className=\"text-main\">Details:</span> <br />{\" \"}\r\n                  <span className=\"text-main\">Order to:</span> {order.user.name}{\" \"}\r\n                  <br /> <span className=\"text-main\">Phone:</span>{\" \"}\r\n                  {order.user.phone} <br />{\" \"}\r\n                  <span className=\"text-main\">Email:</span> {order.user.email}{\" \"}\r\n                </p>\r\n              </div>\r\n              <div className=\"col-md-2\">{order.paymentMethodType}</div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}