{"ast":null,"code":"import React,{useContext}from\"react\";import{addCart}from\"../../Context/AddProductToCart\";import{RotatingLines}from\"react-loader-spinner\";import toast from\"react-hot-toast\";import{Link,Navigate,useNavigate}from\"react-router-dom\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(){const{getProductFromCart,numberOfCartItem,totalPrice,allProducts,updateProductToCart,deleteItemFromCart,deleteCart}=useContext(addCart);const navigate=useNavigate();async function updateCart(id,newCount){const res=await updateProductToCart(id,newCount);if(res){toast.success(\"Product Updated\");}else{toast.error(\"Error\");}}async function deletedItemFromCart(id){const res=await deleteItemFromCart(id);if(res){toast.success(\"Product Updated\");}else{toast.error(\"Error\");}}async function deletedCart(){try{await deleteCart();toast.success(\"Cart Cleared\");setTimeout(()=>{navigate(\"/home\");},2000);}catch(error){console.error(\"Error clearing cart:\",error);toast.error(\"Failed to clear cart\");}}if(allProducts==0){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center align-items-center\",children:[\" \",/*#__PURE__*/_jsxs(\"h2\",{children:[\"Number of cart item :\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:numberOfCartItem})]})]})});}if(!allProducts){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\",children:/*#__PURE__*/_jsx(RotatingLines,{visible:true,height:\"96\",width:\"96\",color:\"var(--main-color)\",strokeWidth:\"5\",animationDuration:\"0.75\",ariaLabel:\"rotating-lines-loading\",wrapperStyle:{},wrapperClass:\"\"})})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Cart\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container bg-light my-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shop cart:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Number of cart item :\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:numberOfCartItem})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deletedCart(),className:\"btn btn-outline-success\",children:\"Remove Cart\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-main \",children:\"Total cart price :\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-main\",children:[totalPrice,\" EGP\"]}),/*#__PURE__*/_jsx(Link,{to:\"/payment\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn bg-main mx-3\",type:\"button\",children:\"Confirm payment\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:allProducts.map((productCart,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"row border-1 border-bottom border-black align-items-center py-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:productCart.product.imageCover,alt:productCart.product.title})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[productCart.product.title,\".\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-main\",children:[\"price :\",productCart.price]}),/*#__PURE__*/_jsx(\"p\",{role:\"button\",onClick:()=>deletedItemFromCart(productCart.product._id),className:\"btn text-main \",children:\"\\uD83D\\uDDD1Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2  d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{updateCart(productCart.product._id,productCart.count+1);},className:\"btn btn-outline-success\",children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{children:productCart.count}),/*#__PURE__*/_jsx(\"button\",{disabled:productCart.count==1,onClick:()=>{updateCart(productCart.product._id,productCart.count-1);},className:\"btn btn-outline-success\",children:\"-\"})]})]},index))})]})]});}","map":{"version":3,"names":["React","useContext","addCart","RotatingLines","toast","Link","Navigate","useNavigate","Helmet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","getProductFromCart","numberOfCartItem","totalPrice","allProducts","updateProductToCart","deleteItemFromCart","deleteCart","navigate","updateCart","id","newCount","res","success","error","deletedItemFromCart","deletedCart","setTimeout","console","children","className","visible","height","width","color","strokeWidth","animationDuration","ariaLabel","wrapperStyle","wrapperClass","onClick","to","type","map","productCart","index","src","product","imageCover","alt","title","price","role","_id","count","disabled"],"sources":["C:/Users/Mostafa/OneDrive/Desktop/Route/final-pro/src/component/Cart/Cart.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport { addCart } from \"../../Context/AddProductToCart\";\r\nimport { RotatingLines } from \"react-loader-spinner\";\r\nimport toast from \"react-hot-toast\";\r\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport default function Cart() {\r\n  const {\r\n    getProductFromCart,\r\n    numberOfCartItem,\r\n    totalPrice,\r\n    allProducts,\r\n    updateProductToCart,\r\n    deleteItemFromCart,\r\n    deleteCart,\r\n  } = useContext(addCart);\r\n  const navigate = useNavigate();\r\n\r\n  async function updateCart(id, newCount) {\r\n    const res = await updateProductToCart(id, newCount);\r\n    if (res) {\r\n      toast.success(\"Product Updated\");\r\n    } else {\r\n      toast.error(\"Error\");\r\n    }\r\n  }\r\n  async function deletedItemFromCart(id) {\r\n    const res = await deleteItemFromCart(id);\r\n    if (res) {\r\n      toast.success(\"Product Updated\");\r\n    } else {\r\n      toast.error(\"Error\");\r\n    }\r\n  }\r\n\r\n  async function deletedCart() {\r\n    try {\r\n      await deleteCart();\r\n      toast.success(\"Cart Cleared\");\r\n      setTimeout(() => {\r\n        navigate(\"/home\");\r\n      }, 2000);\r\n    } catch (error) {\r\n      console.error(\"Error clearing cart:\", error);\r\n      toast.error(\"Failed to clear cart\");\r\n    }\r\n  }\r\n  if (allProducts == 0) {\r\n    return (\r\n      <>\r\n        <div className=\"d-flex justify-content-center align-items-center\">\r\n          {\" \"}\r\n          <h2>\r\n            Number of cart item :{\" \"}\r\n            <span className=\"text-main\">{numberOfCartItem}</span>\r\n          </h2>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n  if (!allProducts) {\r\n    return (\r\n      <>\r\n        <div className=\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\">\r\n          <RotatingLines\r\n            visible={true}\r\n            height=\"96\"\r\n            width=\"96\"\r\n            color=\"var(--main-color)\"\r\n            strokeWidth=\"5\"\r\n            animationDuration=\"0.75\"\r\n            ariaLabel=\"rotating-lines-loading\"\r\n            wrapperStyle={{}}\r\n            wrapperClass=\"\"\r\n          />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Cart</title>\r\n      </Helmet>\r\n      <div className=\"container bg-light my-2\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1>Shop cart:</h1>\r\n          <div>\r\n            <h5>\r\n              Number of cart item :{\" \"}\r\n              <span className=\"text-main\">{numberOfCartItem}</span>\r\n            </h5>\r\n            <button\r\n              onClick={() => deletedCart()}\r\n              className=\"btn btn-outline-success\"\r\n            >\r\n              Remove Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex align-content-center align-items-center\">\r\n          <p className=\"text-main \">Total cart price :</p>\r\n          <p className=\"text-main\">{totalPrice} EGP</p>\r\n          <Link to={\"/payment\"}>\r\n            <button className=\"btn bg-main mx-3\" type=\"button\">\r\n              Confirm payment\r\n            </button>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"\">\r\n          {allProducts.map((productCart, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"row border-1 border-bottom border-black align-items-center py-3\"\r\n            >\r\n              <div className=\"col-md-2\">\r\n                <figure>\r\n                  <img\r\n                    className=\"w-100\"\r\n                    src={productCart.product.imageCover}\r\n                    alt={productCart.product.title}\r\n                  />\r\n                </figure>\r\n              </div>\r\n              <div className=\"col-md-8\">\r\n                <p>{productCart.product.title}.</p>\r\n                <p className=\"text-main\">price :{productCart.price}</p>\r\n                <p\r\n                  role=\"button\"\r\n                  onClick={() => deletedItemFromCart(productCart.product._id)}\r\n                  className=\"btn text-main \"\r\n                >\r\n                  ðŸ—‘Remove\r\n                </p>\r\n              </div>\r\n              <div className=\"col-md-2  d-flex justify-content-between align-items-center\">\r\n                <button\r\n                  onClick={() => {\r\n                    updateCart(productCart.product._id, productCart.count + 1);\r\n                  }}\r\n                  className=\"btn btn-outline-success\"\r\n                >\r\n                  +\r\n                </button>\r\n                <p>{productCart.count}</p>\r\n                <button\r\n                  disabled={productCart.count == 1}\r\n                  onClick={() => {\r\n                    updateCart(productCart.product._id, productCart.count - 1);\r\n                  }}\r\n                  className=\"btn btn-outline-success\"\r\n                >\r\n                  -\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}