{"ast":null,"code":"import axios from\"axios\";import React,{createContext,useContext,useEffect,useState}from\"react\";import{tokenContext}from\"./AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";export const WishListContext=/*#__PURE__*/createContext();export default function AddWishListProvider(_ref){let{children}=_ref;const{token}=useContext(tokenContext);const[numberOfWishItems,setNumberOfWishItems]=useState(0);const[allWishItems,setAllWishItems]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{getWishList();},[token]);async function getWishList(){try{const response=await axios.get(\"https://ecommerce.routemisr.com/api/v1/wishlist\",{headers:{token:localStorage.getItem(\"tkn\")}});setAllWishItems(response.data.data);setNumberOfWishItems(response.data.count);setLoading(false);}catch(error){console.error(\"Error fetching wishlist:\",error);}}async function addToWishList(productId){try{const response=await axios.post(\"https://ecommerce.routemisr.com/api/v1/wishlist\",{productId},{headers:{token:localStorage.getItem(\"tkn\")}});setAllWishItems(response.data.data);setNumberOfWishItems(response.data.count);return response.data;}catch(error){console.error(\"Error adding product to wishlist:\",error);throw new Error(\"Failed to add product to wishlist\");}}async function deleteFromWishList(wishlistItemId){try{await axios.delete(\"https://ecommerce.routemisr.com/api/v1/wishlist/\".concat(wishlistItemId),{headers:{token:localStorage.getItem(\"tkn\")}});setAllWishItems(prevItems=>prevItems.filter(item=>item.id!==wishlistItemId));setNumberOfWishItems(prev=>prev-1);}catch(error){console.error(\"Error deleting item from wishlist:\",error);throw new Error(\"Failed to delete item from wishlist\");}}const contextValue={addToWishList,deleteFromWishList,numberOfWishItems,allWishItems,loading,getWishList};return/*#__PURE__*/_jsx(WishListContext.Provider,{value:contextValue,children:children});}","map":{"version":3,"names":["axios","React","createContext","useContext","useEffect","useState","tokenContext","jsx","_jsx","WishListContext","AddWishListProvider","_ref","children","token","numberOfWishItems","setNumberOfWishItems","allWishItems","setAllWishItems","loading","setLoading","getWishList","response","get","headers","localStorage","getItem","data","count","error","console","addToWishList","productId","post","Error","deleteFromWishList","wishlistItemId","delete","concat","prevItems","filter","item","id","prev","contextValue","Provider","value"],"sources":["C:/Users/Mostafa/OneDrive/Desktop/Route/final-pro/src/Context/addWishList.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nimport { tokenContext } from \"./AuthContext\";\r\n\r\nexport const WishListContext = createContext();\r\n\r\nexport default function AddWishListProvider({ children }) {\r\n  const { token } = useContext(tokenContext);\r\n  const [numberOfWishItems, setNumberOfWishItems] = useState(0);\r\n  const [allWishItems, setAllWishItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    getWishList();\r\n  }, [token]);\r\n\r\n  async function getWishList() {\r\n    try {\r\n      const response = await axios.get(\r\n        \"https://ecommerce.routemisr.com/api/v1/wishlist\",\r\n        {\r\n          headers: { token: localStorage.getItem(\"tkn\") },\r\n        }\r\n      );\r\n      setAllWishItems(response.data.data);\r\n      setNumberOfWishItems(response.data.count);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(\"Error fetching wishlist:\", error);\r\n    }\r\n  }\r\n\r\n  async function addToWishList(productId) {\r\n    try {\r\n      const response = await axios.post(\r\n        `https://ecommerce.routemisr.com/api/v1/wishlist`,\r\n        { productId },\r\n        { headers: { token: localStorage.getItem(\"tkn\") } }\r\n      );\r\n      setAllWishItems(response.data.data);\r\n      setNumberOfWishItems(response.data.count);\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error adding product to wishlist:\", error);\r\n      throw new Error(\"Failed to add product to wishlist\");\r\n    }\r\n  }\r\n\r\n  async function deleteFromWishList(wishlistItemId) {\r\n    try {\r\n      await axios.delete(\r\n        `https://ecommerce.routemisr.com/api/v1/wishlist/${wishlistItemId}`,\r\n        {\r\n          headers: { token: localStorage.getItem(\"tkn\") },\r\n        }\r\n      );\r\n      setAllWishItems((prevItems) =>\r\n        prevItems.filter((item) => item.id !== wishlistItemId)\r\n      );\r\n      setNumberOfWishItems((prev) => prev - 1);\r\n    } catch (error) {\r\n      console.error(\"Error deleting item from wishlist:\", error);\r\n      throw new Error(\"Failed to delete item from wishlist\");\r\n    }\r\n  }\r\n\r\n  const contextValue = {\r\n    addToWishList,\r\n    deleteFromWishList,\r\n    numberOfWishItems,\r\n    allWishItems,\r\n    loading,\r\n    getWishList,\r\n  };\r\n\r\n  return (\r\n    <WishListContext.Provider value={contextValue}>\r\n      {children}\r\n    </WishListContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}