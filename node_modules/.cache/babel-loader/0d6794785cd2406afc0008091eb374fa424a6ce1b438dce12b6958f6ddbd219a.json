{"ast":null,"code":"import axios from\"axios\";import React,{useContext}from\"react\";import{RotatingLines}from\"react-loader-spinner\";import{useQuery}from\"react-query\";import{Navigate,useParams}from\"react-router-dom\";import{addCart}from\"../../Context/AddProductToCart\";import toast from\"react-hot-toast\";import{WishListContext}from\"../../Context/addWishList\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductDetails(){const{addProductToCart}=useContext(addCart);const{addToWishList}=useContext(WishListContext);async function addProduct(id){try{const res=await addProductToCart(id);if(res){toast.success(res.message);}else{toast.error(\"Failed to add product to cart\");}}catch(error){console.error(\"Error adding product to cart:\",error);toast.error(\"An error occurred while adding the product to cart\");}}async function addWishList(id){try{const res=await addToWishList(id);if(res){toast.success(res.message);}else{toast.error(\"Failed to add product to cart\");}}catch(error){console.error(\"Error adding product to cart:\",error);toast.error(\"An error occurred while adding the product to cart\");}}const{id}=useParams();function getProductDetails(){return axios.get(\"https://ecommerce.routemisr.com/api/v1/products/\".concat(id));}const{isLoading,data,isError}=useQuery(\"getProductDetails/\".concat(id),getProductDetails);if(isLoading){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\",children:/*#__PURE__*/_jsx(RotatingLines,{visible:true,height:\"96\",width:\"96\",color:\"var(--main-color)\",strokeWidth:\"5\",animationDuration:\"0.75\",ariaLabel:\"rotating-lines-loading\",wrapperStyle:{},wrapperClass:\"\"})})});}if(isError){return/*#__PURE__*/_jsx(Navigate,{to:\"/Products\"});}const productData=data.data.data;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:productData.title.split(\" \").slice(0,2).join(\" \")+\" Product\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:productData.imageCover,alt:productData.title})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\" my-md-3\",children:productData.title}),/*#__PURE__*/_jsx(\"h4\",{className:\" my-md-3\",children:productData.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex my-md-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:productData.category.name}),/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",style:{height:\"50px\"},src:productData.category.image,alt:productData.category.name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-md-2 d-flex align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"p\",{className:\"h4\",children:\"Price:\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"p\",{className:\"price pt-3\",children:productData.priceAfterDiscount?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-decoration-line-through\",children:productData.price}),\"- \",productData.priceAfterDiscount,/*#__PURE__*/_jsx(\"span\",{children:\"EGP\"})]})}):/*#__PURE__*/_jsxs(\"p\",{children:[productData.price,/*#__PURE__*/_jsx(\"span\",{children:\"EGP\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\" w-75 text-end\",children:/*#__PURE__*/_jsx(\"i\",{role:\"button\",onClick:()=>addWishList(productData.id),className:\"fa-solid fa-heart fa-2x\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addProduct(productData.id),type:\"button\",className:\"btn bg-main w-100 text-white\",children:\"+ Add Product in Cart\"})]})]})})]});}","map":{"version":3,"names":["axios","React","useContext","RotatingLines","useQuery","Navigate","useParams","addCart","toast","WishListContext","Helmet","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProductDetails","addProductToCart","addToWishList","addProduct","id","res","success","message","error","console","addWishList","getProductDetails","get","concat","isLoading","data","isError","children","className","visible","height","width","color","strokeWidth","animationDuration","ariaLabel","wrapperStyle","wrapperClass","to","productData","title","split","slice","join","src","imageCover","alt","description","category","name","style","image","priceAfterDiscount","price","role","onClick","type"],"sources":["C:/Users/Mostafa/OneDrive/Desktop/Route/final-pro/src/component/ProductDetails/ProductDetails.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useContext } from \"react\";\r\nimport { RotatingLines } from \"react-loader-spinner\";\r\nimport { useQuery } from \"react-query\";\r\nimport { Navigate, useParams } from \"react-router-dom\";\r\nimport { addCart } from \"../../Context/AddProductToCart\";\r\nimport toast from \"react-hot-toast\";\r\nimport { WishListContext } from \"../../Context/addWishList\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport default function ProductDetails() {\r\n  const { addProductToCart } = useContext(addCart);\r\n  const { addToWishList } = useContext(WishListContext);\r\n  async function addProduct(id) {\r\n    try {\r\n      const res = await addProductToCart(id);\r\n      if (res) {\r\n        toast.success(res.message);\r\n      } else {\r\n        toast.error(\"Failed to add product to cart\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding product to cart:\", error);\r\n      toast.error(\"An error occurred while adding the product to cart\");\r\n    }\r\n  }\r\n  async function addWishList(id) {\r\n    try {\r\n      const res = await addToWishList(id);\r\n      if (res) {\r\n        toast.success(res.message);\r\n      } else {\r\n        toast.error(\"Failed to add product to cart\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding product to cart:\", error);\r\n      toast.error(\"An error occurred while adding the product to cart\");\r\n    }\r\n  }\r\n\r\n  const { id } = useParams();\r\n  function getProductDetails() {\r\n    return axios.get(`https://ecommerce.routemisr.com/api/v1/products/${id}`);\r\n  }\r\n  const { isLoading, data, isError } = useQuery(\r\n    `getProductDetails/${id}`,\r\n    getProductDetails\r\n  );\r\n  if (isLoading) {\r\n    return (\r\n      <>\r\n        <div className=\"vh-100 w-100 d-flex justify-content-center align-items-center bg-black\">\r\n          <RotatingLines\r\n            visible={true}\r\n            height=\"96\"\r\n            width=\"96\"\r\n            color=\"var(--main-color)\"\r\n            strokeWidth=\"5\"\r\n            animationDuration=\"0.75\"\r\n            ariaLabel=\"rotating-lines-loading\"\r\n            wrapperStyle={{}}\r\n            wrapperClass=\"\"\r\n          />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n  if (isError) {\r\n    return <Navigate to={\"/Products\"} />;\r\n  }\r\n\r\n  const productData = data.data.data;\r\n  return (\r\n    <>\r\n          <Helmet>\r\n        <title>{productData.title.split(\" \").slice(0, 2).join(\" \") + \" Product\"}</title>\r\n      </Helmet>\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-4\">\r\n            <figure>\r\n              <img\r\n                className=\"w-100\"\r\n                src={productData.imageCover}\r\n                alt={productData.title}\r\n              />\r\n            </figure>\r\n          </div>\r\n          <div className=\"col-md-8\">\r\n            <h1 className=\" my-md-3\">{productData.title}</h1>\r\n            <h4 className=\" my-md-3\">{productData.description}</h4>\r\n            <div className=\"d-flex my-md-3\">\r\n              <h4>{productData.category.name}</h4>\r\n              <figure>\r\n                <img\r\n                  className=\"w-100\"\r\n                  style={{ height: \"50px\" }}\r\n                  src={productData.category.image}\r\n                  alt={productData.category.name}\r\n                />\r\n              </figure>\r\n            </div>\r\n            <div className=\"my-md-2 d-flex align-items-center\">\r\n              <div>\r\n                {\" \"}\r\n                <p className=\"h4\">Price:</p>\r\n              </div>\r\n              <div>\r\n                {\" \"}\r\n                <p className=\"price pt-3\">\r\n                  {productData.priceAfterDiscount ? (\r\n                    <>\r\n                      <p>\r\n                        <span className=\"text-decoration-line-through\">\r\n                          {productData.price}\r\n                        </span>\r\n                        - {productData.priceAfterDiscount}\r\n                        <span>EGP</span>\r\n                      </p>\r\n                    </>\r\n                  ) : (\r\n                    <p>\r\n                      {productData.price}\r\n                      <span>EGP</span>\r\n                    </p>\r\n                  )}\r\n                </p>\r\n              </div>\r\n              <div className=\" w-75 text-end\">\r\n                <i\r\n                  role=\"button\"\r\n                  onClick={() => addWishList(productData.id)}\r\n                  className=\"fa-solid fa-heart fa-2x\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={() => addProduct(productData.id)}\r\n              type=\"button\"\r\n              className=\"btn bg-main w-100 text-white\"\r\n            >\r\n              + Add Product in Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}