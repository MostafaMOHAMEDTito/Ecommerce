{"ast":null,"code":"import axios,{Axios}from\"axios\";import{useFormik}from\"formik\";import React,{useContext,useState}from\"react\";import{ColorRing}from\"react-loader-spinner\";import{useNavigate}from\"react-router-dom\";import{tokenContext}from\"../../Context/AuthContext\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){const userData={email:\"\",password:\"\"};const{token,setToken}=useContext(tokenContext);const navigate=useNavigate();const[inErr,setInErr]=useState(false);const[inSucc,setInSucc]=useState(false);const[isLoading,setisLoading]=useState(false);async function mySubmit(values){setisLoading(true);await axios.post(\"https://ecommerce.routemisr.com/api/v1/auth/signin\",values).then(suss=>{localStorage.setItem(\"tkn\",suss.data.token);setToken(suss.data.token);setisLoading(false);setInSucc(suss.data.user.name);setTimeout(()=>{setInSucc(false);navigate(\"/home\");},3000);console.log(suss.data);}).catch(err=>{setisLoading(false);setInErr(err.response.data.message);console.log(\"Errors : \"+err.response.data.message);setTimeout(()=>{setInErr(false);},3000);});}const myFormik=useFormik({initialValues:userData,onSubmit:mySubmit,validate:function(values){const errors={};if(values.email.includes(\"@\")===false||values.email.includes(\".\")===false){errors.email=\"Email must be in format\";}if(values.password.length<6||values.password.length>12){errors.password=\"Password must be from 6 to 12 characters\";}return errors;}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 m-auto p-5 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login Now :\"}),inSucc?/*#__PURE__*/_jsxs(\"div\",{className:\"alert-success alert text-center ms-5 \",children:[\"Wellcome \",inSucc]}):null,inErr?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger text-center ms-5 w-50\",children:inErr}):null]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:myFormik.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{onBlur:myFormik.handleBlur,onChange:myFormik.handleChange,type:\"email\",id:\"email\",value:myFormik.values.email,className:\"form-control mb-1\"}),myFormik.errors.email&&myFormik.touched.email?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:myFormik.errors.email}):null,/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{onBlur:myFormik.handleBlur,onChange:myFormik.handleChange,type:\"password\",id:\"password\",value:myFormik.values.password,className:\"form-control mb-1\"}),myFormik.errors.password&&myFormik.touched.password?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:myFormik.errors.password}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn bg-main mt-2 ms-auto d-flex text-white\",children:isLoading?/*#__PURE__*/_jsx(ColorRing,{visible:true,height:\"35\",width:\"35\",ariaLabel:\"color-ring-loading\",wrapperStyle:{},wrapperClass:\"color-ring-wrapper\",colors:[\"#ffff\",\"#ffff\",\"#ffff\",\"#ffff\",\"#ffff\"]}):\"Login\"})]})]})]});}","map":{"version":3,"names":["axios","Axios","useFormik","React","useContext","useState","ColorRing","useNavigate","tokenContext","Helmet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","userData","email","password","token","setToken","navigate","inErr","setInErr","inSucc","setInSucc","isLoading","setisLoading","mySubmit","values","post","then","suss","localStorage","setItem","data","user","name","setTimeout","console","log","catch","err","response","message","myFormik","initialValues","onSubmit","validate","errors","includes","length","children","className","handleSubmit","htmlFor","onBlur","handleBlur","onChange","handleChange","type","id","value","touched","visible","height","width","ariaLabel","wrapperStyle","wrapperClass","colors"],"sources":["C:/Users/Mostafa/OneDrive/Desktop/Route/final-pro/src/component/Login/Login.jsx"],"sourcesContent":["import axios, { Axios } from \"axios\";\r\nimport { useFormik } from \"formik\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { ColorRing } from \"react-loader-spinner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { tokenContext } from \"../../Context/AuthContext\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\n\r\n\r\nexport default function Login() {\r\n  const userData = {\r\n    email: \"\",\r\n    password: \"\",\r\n  };\r\n  const {token , setToken }= useContext(tokenContext)\r\n\r\n  const navigate = useNavigate();\r\n  const [inErr, setInErr] = useState(false);\r\n  const [inSucc, setInSucc] = useState(false);\r\n  const [isLoading, setisLoading] = useState(false);\r\n  async function mySubmit(values) {\r\n    setisLoading(true);\r\n     await axios\r\n      .post(\"https://ecommerce.routemisr.com/api/v1/auth/signin\", values)\r\n      .then((suss) => {\r\n        localStorage.setItem(\"tkn\",suss.data.token)\r\n        setToken(suss.data.token)\r\n        setisLoading(false);\r\n        setInSucc(suss.data.user.name);\r\n        setTimeout(() => {\r\n          setInSucc(false);\r\n          navigate(\"/home\");\r\n        }, 3000);\r\n        console.log(suss.data);\r\n      })\r\n      .catch((err) => {\r\n        setisLoading(false);\r\n        setInErr(err.response.data.message);\r\n        console.log(\"Errors : \" + err.response.data.message);\r\n        setTimeout(() => {\r\n          setInErr(false);\r\n        }, 3000);\r\n      });\r\n  }\r\n\r\n  const myFormik = useFormik({\r\n    initialValues: userData,\r\n    onSubmit: mySubmit,\r\n\r\n    validate: function (values) {\r\n      const errors = {};\r\n\r\n      if (\r\n        values.email.includes(\"@\") === false ||\r\n        values.email.includes(\".\") === false\r\n      ) {\r\n        errors.email = \"Email must be in format\";\r\n      }\r\n      if (values.password.length < 6 || values.password.length > 12) {\r\n        errors.password = \"Password must be from 6 to 12 characters\";\r\n      }\r\n\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n              <Helmet>\r\n      <title>Login</title>\r\n    </Helmet>\r\n      <div className=\"w-75 m-auto p-5 \">\r\n        <div className=\"d-flex\">\r\n          <h3>Login Now :</h3>\r\n          {inSucc ? (\r\n            <div className=\"alert-success alert text-center ms-5 \">\r\n              Wellcome {inSucc}\r\n            </div>\r\n          ) : null}\r\n          {inErr ? (\r\n            <div className=\"alert alert-danger text-center ms-5 w-50\">\r\n              {inErr}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <form onSubmit={myFormik.handleSubmit}>\r\n          <label htmlFor=\"email\">Email:</label>\r\n          <input\r\n            onBlur={myFormik.handleBlur}\r\n            onChange={myFormik.handleChange}\r\n            type=\"email\"\r\n            id=\"email\"\r\n            value={myFormik.values.email}\r\n            className=\"form-control mb-1\"\r\n          />\r\n          {myFormik.errors.email && myFormik.touched.email ? (\r\n            <div className=\"alert alert-danger\">{myFormik.errors.email}</div>\r\n          ) : null}\r\n          <label htmlFor=\"password\">Password:</label>\r\n          <input\r\n            onBlur={myFormik.handleBlur}\r\n            onChange={myFormik.handleChange}\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={myFormik.values.password}\r\n            className=\"form-control mb-1\"\r\n          />\r\n          {myFormik.errors.password && myFormik.touched.password ? (\r\n            <div className=\"alert alert-danger\">{myFormik.errors.password}</div>\r\n          ) : null}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn bg-main mt-2 ms-auto d-flex text-white\"\r\n          >\r\n            {isLoading ? (\r\n              <ColorRing\r\n                visible={true}\r\n                height=\"35\"\r\n                width=\"35\"\r\n                ariaLabel=\"color-ring-loading\"\r\n                wrapperStyle={{}}\r\n                wrapperClass=\"color-ring-wrapper\"\r\n                colors={[\"#ffff\", \"#ffff\", \"#ffff\", \"#ffff\", \"#ffff\"]}\r\n              />\r\n            ) : (\r\n              \"Login\"\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}